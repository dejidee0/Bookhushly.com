(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6072],{3067:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8063:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9806:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6141:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1738:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},1295:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2741:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},7972:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9255:function(e,s,t){Promise.resolve().then(t.bind(t,85))},85:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var r=t(7437),l=t(2265),n=t(2420),i=t(6110),a=t(3023),c=t(9155);t(2206);var d=t(3160),o=t(4045),m=t(5825),x=t(6141),u=t(4530),h=t(9806),f=t(8063),j=t(3067),g=t(8203),N=t(7972),b=t(1738),v=t(2741),p=t(1295),y=t(1396),w=t.n(y),Z=t(9314),k=t(1424);function C(){let{user:e}=(0,o.tN)(),{bookings:s,setBookings:t}=(0,o.ML)(),[y,C]=(0,l.useState)(!0),[_,P]=(0,l.useState)(null);(0,l.useEffect)(()=>{let s=async()=>{if(e)try{C(!0);let{data:s,error:r}=await (0,m.aL)(e.id,"vendor");r?(console.error("Bookings error:",r),k.Am.error("Failed to load bookings")):t(s||[])}catch(e){console.error("Load bookings error:",e),k.Am.error("Failed to load bookings")}finally{C(!1)}};s()},[e,t]);let z=async(e,r)=>{P(e);try{let{data:l,error:n}=await (0,m.i1)(e,r);if(n){k.Am.error("Failed to update booking status");return}t(s.map(s=>s.id===e?{...s,status:r}:s)),k.Am.success("Booking ".concat(r,"!"),{description:"The customer has been notified of the status change"})}catch(e){k.Am.error("Failed to update booking status")}finally{P(null)}},q=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},S=e=>{switch(e){case"pending":return(0,r.jsx)(x.Z,{className:"h-4 w-4"});case"confirmed":case"completed":return(0,r.jsx)(u.Z,{className:"h-4 w-4"});case"cancelled":return(0,r.jsx)(h.Z,{className:"h-4 w-4"});default:return(0,r.jsx)(f.Z,{className:"h-4 w-4"})}},L=e=>{switch(e.status){case"pending":return(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(a.z,{size:"sm",onClick:()=>z(e.id,"confirmed"),disabled:_===e.id,children:_===e.id?(0,r.jsx)(d.T,{className:"h-4 w-4"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"Confirm"]})}),(0,r.jsxs)(a.z,{variant:"outline",size:"sm",onClick:()=>z(e.id,"cancelled"),disabled:_===e.id,children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),"Decline"]})]});case"confirmed":return(0,r.jsx)(a.z,{variant:"outline",size:"sm",onClick:()=>z(e.id,"completed"),disabled:_===e.id,children:_===e.id?(0,r.jsx)(d.T,{className:"h-4 w-4"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"Mark Complete"]})});default:return null}};return y?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(d.T,{className:"h-8 w-8"})}):(0,r.jsx)(n.a,{requiredRole:"vendor",children:(0,r.jsxs)("div",{className:"container py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(w(),{href:"/dashboard/vendor",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-4",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Booking Requests"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your incoming booking requests and confirmed bookings"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Requests"}),(0,r.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.length})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Pending"}),(0,r.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.filter(e=>"pending"===e.status).length})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Confirmed"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.filter(e=>"confirmed"===e.status).length})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Completed"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.filter(e=>"completed"===e.status).length})})]})]}),0===s.length?(0,r.jsx)(i.Zb,{children:(0,r.jsxs)(i.aY,{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)(g.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No booking requests yet"}),(0,r.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:"Booking requests will appear here once customers start booking your services"}),(0,r.jsx)(a.z,{asChild:!0,children:(0,r.jsx)(w(),{href:"/dashboard/vendor/listings/create",children:"Create More Listings"})})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[s.filter(e=>"pending"===e.status).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,r.jsx)(x.Z,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Pending Requests (",s.filter(e=>"pending"===e.status).length,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:s.filter(e=>"pending"===e.status).map(e=>{var s,t;return(0,r.jsxs)(i.Zb,{className:"border-yellow-200 bg-yellow-50/50",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.ll,{className:"text-lg",children:null===(s=e.listings)||void 0===s?void 0:s.title}),(0,r.jsx)(i.SZ,{children:"Booking request from customer"})]}),(0,r.jsxs)(c.C,{className:q(e.status),children:[S(e.status),(0,r.jsx)("span",{className:"ml-1 capitalize",children:e.status})]})]})}),(0,r.jsxs)(i.aY,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsx)("span",{children:(0,Z.ZP)(new Date(e.booking_date),"PPP")})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsx)("span",{children:e.booking_time})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(N.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:[e.guests," guest",e.guests>1?"s":""]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:["₦",null===(t=e.total_amount)||void 0===t?void 0:t.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsx)("span",{children:e.contact_phone})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsx)("span",{children:e.contact_email})]})]}),e.special_requests&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h5",{className:"font-medium text-sm mb-1",children:"Special Requests:"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground bg-white p-3 rounded border",children:e.special_requests})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Requested ",(0,Z.ZP)(new Date(e.created_at),"PPp")]}),L(e)]})]})]},e.id)})})]}),s.filter(e=>"confirmed"===e.status).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Confirmed Bookings (",s.filter(e=>"confirmed"===e.status).length,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:s.filter(e=>"confirmed"===e.status).map(e=>{var s,t;return(0,r.jsxs)(i.Zb,{className:"border-blue-200 bg-blue-50/50",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.ll,{className:"text-lg",children:null===(s=e.listings)||void 0===s?void 0:s.title}),(0,r.jsx)(i.SZ,{children:"Confirmed booking - ready to serve"})]}),(0,r.jsxs)(c.C,{className:q(e.status),children:[S(e.status),(0,r.jsx)("span",{className:"ml-1 capitalize",children:e.status})]})]})}),(0,r.jsxs)(i.aY,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsx)("span",{children:(0,Z.ZP)(new Date(e.booking_date),"PPP")})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsx)("span",{children:e.booking_time})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(N.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:[e.guests," guest",e.guests>1?"s":""]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:["₦",null===(t=e.total_amount)||void 0===t?void 0:t.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),(0,r.jsx)("span",{children:e.contact_phone})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),(0,r.jsx)("span",{children:e.contact_email})]})]}),L(e)]})]})]},e.id)})})]}),s.filter(e=>"completed"===e.status).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Completed Bookings (",s.filter(e=>"completed"===e.status).length,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:s.filter(e=>"completed"===e.status).map(e=>{var s,t;return(0,r.jsxs)(i.Zb,{className:"border-green-200 bg-green-50/50",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.ll,{className:"text-lg",children:null===(s=e.listings)||void 0===s?void 0:s.title}),(0,r.jsx)(i.SZ,{children:"Service completed successfully"})]}),(0,r.jsxs)(c.C,{className:q(e.status),children:[S(e.status),(0,r.jsx)("span",{className:"ml-1 capitalize",children:e.status})]})]})}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsx)("span",{children:(0,Z.ZP)(new Date(e.booking_date),"PPP")})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsx)("span",{children:e.booking_time})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(N.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:[e.guests," guest",e.guests>1?"s":""]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:["₦",null===(t=e.total_amount)||void 0===t?void 0:t.toLocaleString()]})]})]})})]},e.id)})})]})]})]})})}},2420:function(e,s,t){"use strict";t.d(s,{a:function(){return c}});var r=t(7437),l=t(2265),n=t(4033),i=t(4045),a=t(3160);function c(e){let{children:s,requiredRole:t=null}=e,{user:c,loading:d}=(0,i.tN)(),[o,m]=(0,l.useState)(!0),x=(0,n.useRouter)();return((0,l.useEffect)(()=>{let e=setTimeout(()=>{var e;if(!c){x.push("/login");return}if(t&&(null===(e=c.user_metadata)||void 0===e?void 0:e.role)!==t){x.push("/unauthorized");return}m(!1)},100);return()=>clearTimeout(e)},[c,x,t]),d||o)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(a.T,{className:"h-8 w-8"})}):c?(0,r.jsx)(r.Fragment,{children:s}):null}},9155:function(e,s,t){"use strict";t.d(s,{C:function(){return a}});var r=t(7437);t(2265);var l=t(9213),n=t(9311);let i=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function a(e){let{className:s,variant:t,...l}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...l})}}},function(e){e.O(0,[7533,4724,9561,8542,700,1181,2971,7864,1744],function(){return e(e.s=9255)}),_N_E=e.O()}]);