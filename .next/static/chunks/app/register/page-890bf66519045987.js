(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4011],{79:function(e,r,s){Promise.resolve().then(s.bind(s,5137))},5137:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return F}});var t=s(7437),a=s(2265),n=s(4033),l=s(1396),i=s.n(l),o=s(3023),c=s(1908),d=s(6672),u=s(6110),m=s(2206),x=s(3160),h=s(5490),f=s(6369),p=s(9311);let j=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(h.fC,{className:(0,p.cn)("grid gap-2",s),...a,ref:r})});j.displayName=h.fC.displayName;let v=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(h.ck,{ref:r,className:(0,p.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,t.jsx)(h.z$,{className:"flex items-center justify-center",children:(0,t.jsx)(f.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});v.displayName=h.ck.displayName;var g=s(4045),N=s(4840),w=s(5825),y=s(3067),b=s(6712),C=s(2812),k=s(7972),P=s(1295),_=s(5589),Z=s(7216),S=s(9670),A=s(1424);function F(){let[e,r]=(0,a.useState)({name:"",email:"",password:"",confirmPassword:"",role:"customer"}),[s,l]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),[p,F]=(0,a.useState)(!1),[E,I]=(0,a.useState)(""),{user:O,setUser:R}=(0,g.tN)(),q=(0,n.useRouter)();(0,a.useEffect)(()=>{if(O){var e;let r=(null===(e=O.user_metadata)||void 0===e?void 0:e.role)||"customer";q.push("/dashboard/".concat(r))}},[O,q]);let B=e=>{r(r=>({...r,[e.target.name]:e.target.value})),E&&I("")},z=()=>e.name.trim()?e.email.trim()?e.password.length<6?(I("Password must be at least 6 characters"),!1):e.password===e.confirmPassword||(I("Passwords do not match"),!1):(I("Email is required"),!1):(I("Name is required"),!1),T=async r=>{if(r.preventDefault(),z()){F(!0),I("");try{let r={name:e.name.trim(),role:e.role},{data:s,error:t}=await (0,N.y1)(e.email,e.password,r);if(t){I(t.message),A.Am.error("Registration failed",{description:t.message});return}if(s.user){let r={id:s.user.id,email:s.user.email,name:e.name.trim(),role:e.role,created_at:new Date().toISOString()},{error:t}=await (0,w.xv)(r);t&&console.error("Profile creation error:",t),R(s.user),A.Am.success("Account created successfully!",{description:"Welcome to Bookhushly! Redirecting to your ".concat(e.role," dashboard...")}),q.push("/dashboard/".concat(e.role))}}catch(e){I("An unexpected error occurred"),A.Am.error("Registration failed",{description:"An unexpected error occurred"})}finally{F(!1)}}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsxs)(i(),{href:"/",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-4",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-primary mb-2",children:"Join Bookhushly"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Create your account and start connecting"})]}),(0,t.jsxs)(u.Zb,{className:"shadow-lg",children:[(0,t.jsxs)(u.Ol,{className:"space-y-1",children:[(0,t.jsx)(u.ll,{className:"text-2xl text-center",children:"Create Account"}),(0,t.jsx)(u.SZ,{className:"text-center",children:"Choose your role and get started"})]}),(0,t.jsxs)(u.aY,{children:[(0,t.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[E&&(0,t.jsx)(m.bZ,{variant:"destructive",children:(0,t.jsx)(m.X,{children:E})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{children:"I want to:"}),(0,t.jsxs)(j,{value:e.role,onValueChange:e=>{r(r=>({...r,role:e}))},children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,t.jsx)(v,{value:"customer",id:"customer"}),(0,t.jsxs)(d._,{htmlFor:"customer",className:"flex items-center cursor-pointer flex-1",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 mr-2 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Book Services"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Find and book hospitality, logistics & security services"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,t.jsx)(v,{value:"vendor",id:"vendor"}),(0,t.jsxs)(d._,{htmlFor:"vendor",className:"flex items-center cursor-pointer flex-1",children:[(0,t.jsx)(C.Z,{className:"h-4 w-4 mr-2 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Provide Services"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"List your business and accept bookings"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"name",children:"Full Name"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(k.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(c.I,{id:"name",name:"name",type:"text",placeholder:"Enter your full name",value:e.name,onChange:B,className:"pl-10",required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"email",children:"Email Address"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(P.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(c.I,{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:e.email,onChange:B,className:"pl-10",required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"password",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(_.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(c.I,{id:"password",name:"password",type:s?"text":"password",placeholder:"Create a password",value:e.password,onChange:B,className:"pl-10 pr-10",required:!0}),(0,t.jsx)("button",{type:"button",onClick:()=>l(!s),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:s?(0,t.jsx)(Z.Z,{className:"h-4 w-4"}):(0,t.jsx)(S.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(_.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(c.I,{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",placeholder:"Confirm your password",value:e.confirmPassword,onChange:B,className:"pl-10 pr-10",required:!0}),(0,t.jsx)("button",{type:"button",onClick:()=>f(!h),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:h?(0,t.jsx)(Z.Z,{className:"h-4 w-4"}):(0,t.jsx)(S.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsx)(o.z,{type:"submit",className:"w-full",disabled:p,children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.T,{className:"mr-2 h-4 w-4"}),"Creating Account..."]}):"Create Account"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",(0,t.jsx)(i(),{href:"/login",className:"text-primary hover:underline font-medium",children:"Sign in here"})]})})]})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["By creating an account, you agree to our"," ",(0,t.jsx)(i(),{href:"/terms",className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",(0,t.jsx)(i(),{href:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"})]})})]})})}},1908:function(e,r,s){"use strict";s.d(r,{I:function(){return l}});var t=s(7437),a=s(2265),n=s(9311);let l=a.forwardRef((e,r)=>{let{className:s,type:a,...l}=e;return(0,t.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...l})});l.displayName="Input"},6672:function(e,r,s){"use strict";s.d(r,{_:function(){return c}});var t=s(7437),a=s(2265),n=s(6743),l=s(9213),i=s(9311);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(n.f,{ref:r,className:(0,i.cn)(o(),s),...a})});c.displayName=n.f.displayName},4840:function(e,r,s){"use strict";s.d(r,{c0:function(){return i},w7:function(){return l},y1:function(){return a},zB:function(){return n}});var t=s(2129);let a=async(e,r,s)=>{try{let{data:a,error:n}=await t.O.auth.signUp({email:e,password:r,options:{data:s}});if(n)throw n;return{data:a,error:null}}catch(e){return{data:null,error:e}}},n=async(e,r)=>{try{let{data:s,error:a}=await t.O.auth.signInWithPassword({email:e,password:r});if(a)throw a;return{data:s,error:null}}catch(e){return{data:null,error:e}}},l=async()=>{try{let{error:e}=await t.O.auth.signOut();if(e)throw e;return{error:null}}catch(e){return{error:e}}},i=async e=>{try{let{error:r}=await t.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(r)throw r;return{error:null}}catch(e){return{error:e}}}}},function(e){e.O(0,[7533,4724,9561,8542,1127,1803,1181,2971,7864,1744],function(){return e(e.s=79)}),_N_E=e.O()}]);